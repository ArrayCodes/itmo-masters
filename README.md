# ITMO Masters Help - Чат-бот для выбора магистерских программ

## Описание задания

**Задача 49: Разработка чат-бота**

Разработать чат-бот, который в диалоговом режиме помогает абитуриенту разобраться, какая из двух магистерских программ ему подходит и как наилучшим образом спланировать учёбу, исходя из учебных планов, загруженных на страницах магистратур:

- [Магистратура "Искусственный интеллект"](https://abit.itmo.ru/program/master/ai)
- [Магистратура "AI Product Management"](https://abit.itmo.ru/program/master/ai_product)

## Требования к решению

**Парсинг данных** - извлечение учебных планов с сайтов
**Диалоговая система** - Telegram-бот для общения с абитуриентами
**Система рекомендаций** - персональные советы по выбору дисциплин
**Релевантность** - бот отвечает только на вопросы по обучению

## Как я решал задачу

### 1. **Анализ требований и планирование**

Сначала я разобрался, что нужно сделать:
- Парсить HTML страницы двух магистратур
- Создать Telegram бота
- Реализовать умную систему рекомендаций
- Обеспечить персонализацию ответов

### 2. **Выбор технологий**

**Python** - основной язык (знаю лучше всего)
**python-telegram-bot** - для создания Telegram бота
**BeautifulSoup4** - для парсинга HTML
**aiohttp** - для асинхронных HTTP запросов

### 3. **Архитектура решения**

```
Telegram Bot (telegram_bot.py)
    ↓
Program Analyzer (program_analyzer.py)
    ↓
Web Parser (web_parser.py)
    ↓
Data Models (Course, Program, BackgroundProfile)
```

### 4. **Этапы разработки**

#### **Этап 1: Парсинг данных**
- Изучил структуру HTML страниц
- Написал `web_parser.py` с извлечением:
  - Названий дисциплин
  - Количества кредитов
  - Семестров изучения
  - Типов дисциплин (обязательные/выборные)

#### **Этап 2: Модели данных**
- Создал классы `Course` и `Program`
- Добавил `BackgroundProfile` для анализа бэкграунда абитуриента
- Реализовал `Recommendation` для персональных советов

#### **Этап 3: Система рекомендаций**
- Написал `program_analyzer.py` с логикой:
  - Анализ навыков программирования
  - Оценка математических знаний
  - Учет бизнес-опыта
  - Балльная система для сравнения программ

#### **Этап 4: Telegram бот**
- Создал `telegram_bot.py` с командами:
  - `/start` - приветствие и инструкции
  - `/help` - справка по использованию
  - Анализ текстовых сообщений с бэкграундом

### 5. **Ключевые решения и проблемы**

#### **Проблема 1: Одинаковые рекомендации для обеих программ**
**Решение**: Добавил дифференцированную логику с балльной системой:
- AI программа: оценивается по техническим навыкам
- Product программа: оценивается по бизнес-навыкам

#### **Проблема 2: Слишком длинные и общие рекомендации**
**Решение**: Сократил вывод до 5-7 строк с конкретными советами:
```
Магистратура 'Искусственный интеллект': ЛУЧШИЙ ВЫБОР! Python + ML = идеальная комбинация
Магистратура 'AI Product Management': Хорошо подходит! Программирование + продукт
```

#### **Проблема 3: Неправильное определение типа программы**
**Решение**: Исправил логику в `.gitignore`:
```python
if "искусственный интеллект" in program_name or ("ai" in program_name and "product" not in program_name):
```

### 6. **Тестирование**

Создал тестовые сценарии для разных профилей:
- Python-программист с математикой
- Бизнес-специалист с опытом управления
- Технический специалист
- Начинающий без опыта

## Как запустить

### 1. **Установка зависимостей**
```bash
pip install -r requirements.txt
```

### 2. **Настройка Telegram бота**
1. Создайте бота через @BotFather
2. Получите токен
3. Создайте `.env` файл:
```env
TELEGRAM_TOKEN=your_bot_token_here
```

### 3. **Запуск**
```bash
python src/maga/telegram_bot.py
```

## Структура проекта

```
maga/
├── src/maga/
│   ├── __init__.py
│   ├── program_analyzer.py    # Основная логика рекомендаций
│   ├── web_parser.py          # Парсинг веб-страниц
│   ├── telegram_bot.py        # Telegram бот
│   ├── config.py              # Конфигурация
│   └── run_bot.py            # Запуск бота
├── tests/
│   └── test_smoke.py         # Базовые тесты
├── requirements.txt           # Зависимости
├── pyproject.toml            # Настройки проекта
└── README.md                 # Документация
```

## Примеры работы

### **Для Python-программиста:**
```
Магистратура 'Искусственный интеллект': ЛУЧШИЙ ВЫБОР! Python + ML = идеальная комбинация
Магистратура 'AI Product Management': Хорошо подходит! Программирование + продукт

ИТОГОВАЯ РЕКОМЕНДАЦИЯ: Вам больше подходит программа 'Искусственный интеллект' (3 vs 1)
```

### **Для бизнес-специалиста:**
```
Магистратура 'Искусственный интеллект': Можно рассмотреть, но не идеально
Магистратура 'AI Product Management': ЛУЧШИЙ ВЫБОР! Идеально для менеджеров

ИТОГОВАЯ РЕКОМЕНДАЦИЯ: Вам больше подходит программа 'AI Product Management' (3 vs 0)
```

## Технические детали

### **Парсинг данных**
- Асинхронные HTTP запросы с retry логикой
- Извлечение структурированных данных из HTML
- Обработка ошибок и fallback стратегии

### **Система рекомендаций**
- Анализ ключевых слов в бэкграунде
- Балльная система оценки (0-3 балла)
- Дифференциация по типам программ
- Персональные советы на основе профиля

### **Telegram бот**
- Обработка текстовых сообщений
- Контекстный анализ бэкграунда
- Форматированный вывод рекомендаций
- Обработка ошибок и валидация

## Что я изучил

1. **BeautifulSoup4** - парсинг HTML и извлечение данных
2. **python-telegram-bot** - создание Telegram ботов
3. **Асинхронное программирование** - aiohttp для веб-запросов
4. **Системы рекомендаций** - алгоритмы персонализации
5. **Git и .gitignore** - правильная организация репозитория

## Результат

Создал полнофункциональный чат-бот, который:
- Парсит данные с сайтов магистратур
- Анализирует бэкграунд абитуриента
- Дает персональные рекомендации
- Сравнивает программы по балльной системе
- Выдает конкретные советы по выбору дисциплин

Бот помогает абитуриентам сделать осознанный выбор между технической (AI) и бизнес-ориентированной (AI Product Management) программами на основе их навыков и целей.

---

**Автор**: Студент, решавший задачу 49
**Дата**: 2025 год
**Технологии**: Python, BeautifulSoup4, python-telegram-bot, aiohttp
